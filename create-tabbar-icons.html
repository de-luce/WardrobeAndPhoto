<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TabBar å›¾æ ‡ç”Ÿæˆå™¨</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      padding: 40px;
      background: #f5f5f5;
      max-width: 1200px;
      margin: 0 auto;
    }
    h1 {
      margin-bottom: 30px;
      color: #333;
    }
    .icon-config {
      background: white;
      padding: 30px;
      border-radius: 12px;
      margin-bottom: 30px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .icon-item {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 30px;
      padding-bottom: 30px;
      border-bottom: 1px solid #eee;
    }
    .icon-item:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }
    .icon-preview {
      width: 81px;
      height: 81px;
      background: #f9f9f9;
      border: 2px dashed #ddd;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 48px;
      flex-shrink: 0;
    }
    .icon-info {
      flex: 1;
    }
    .icon-name {
      font-weight: 600;
      margin-bottom: 10px;
      color: #333;
    }
    .emoji-input {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }
    input[type="text"] {
      flex: 1;
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 24px;
      text-align: center;
    }
    .button-group {
      display: flex;
      gap: 10px;
    }
    button {
      padding: 8px 16px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }
    button:hover {
      background: #5568d3;
    }
    button.secondary {
      background: #764ba2;
    }
    button.secondary:hover {
      background: #5a3a7a;
    }
    .help-text {
      background: #e3f2fd;
      padding: 20px;
      border-radius: 8px;
      margin-top: 30px;
      color: #1565c0;
      line-height: 1.6;
    }
    .help-text strong {
      display: block;
      margin-bottom: 8px;
      color: #0d47a1;
    }
  </style>
</head>
<body>
  <h1>ğŸ–¼ï¸ TabBar å›¾æ ‡ç”Ÿæˆå™¨</h1>
  
  <div class="icon-config">
    <div class="icon-item">
      <div class="icon-preview" id="preview-wardrobe">ğŸ‘—</div>
      <div class="icon-info">
        <div class="icon-name">è¡£æŸœå›¾æ ‡</div>
        <div class="emoji-input">
          <input type="text" id="emoji-wardrobe" value="ğŸ‘—" maxlength="2" placeholder="è¾“å…¥emoji">
          <input type="text" id="emoji-wardrobe-active" value="ğŸ‘—" maxlength="2" placeholder="é€‰ä¸­çŠ¶æ€emoji">
        </div>
        <div class="button-group">
          <button onclick="generateIcon('wardrobe', false)">ç”Ÿæˆæœªé€‰ä¸­å›¾æ ‡</button>
          <button onclick="generateIcon('wardrobe', true)" class="secondary">ç”Ÿæˆé€‰ä¸­å›¾æ ‡</button>
        </div>
      </div>
    </div>

    <div class="icon-item">
      <div class="icon-preview" id="preview-photo">ğŸ“·</div>
      <div class="icon-info">
        <div class="icon-name">ç…§ç‰‡æŸœå›¾æ ‡</div>
        <div class="emoji-input">
          <input type="text" id="emoji-photo" value="ğŸ“·" maxlength="2" placeholder="è¾“å…¥emoji">
          <input type="text" id="emoji-photo-active" value="ğŸ“·" maxlength="2" placeholder="é€‰ä¸­çŠ¶æ€emoji">
        </div>
        <div class="button-group">
          <button onclick="generateIcon('photo', false)">ç”Ÿæˆæœªé€‰ä¸­å›¾æ ‡</button>
          <button onclick="generateIcon('photo', true)" class="secondary">ç”Ÿæˆé€‰ä¸­å›¾æ ‡</button>
        </div>
      </div>
    </div>

    <div class="icon-item">
      <div class="icon-preview" id="preview-wishlist">â­</div>
      <div class="icon-info">
        <div class="icon-name">å¿ƒæ„¿å•å›¾æ ‡</div>
        <div class="emoji-input">
          <input type="text" id="emoji-wishlist" value="â­" maxlength="2" placeholder="è¾“å…¥emoji">
          <input type="text" id="emoji-wishlist-active" value="â­" maxlength="2" placeholder="é€‰ä¸­çŠ¶æ€emoji">
        </div>
        <div class="button-group">
          <button onclick="generateIcon('wishlist', false)">ç”Ÿæˆæœªé€‰ä¸­å›¾æ ‡</button>
          <button onclick="generateIcon('wishlist', true)" class="secondary">ç”Ÿæˆé€‰ä¸­å›¾æ ‡</button>
        </div>
      </div>
    </div>
  </div>

  <div class="help-text">
    <strong>ğŸ“– ä½¿ç”¨è¯´æ˜ï¼š</strong>
    1. ä¿®æ”¹ emoji è¡¨æƒ…ç¬¦å·ï¼ˆå¯ä»¥ä½¿ç”¨ Mac çš„ emoji é€‰æ‹©å™¨ï¼šControl + Command + ç©ºæ ¼ï¼‰<br>
    2. ç‚¹å‡»"ç”Ÿæˆ"æŒ‰é’®ä¸‹è½½å¯¹åº”çš„å›¾æ ‡æ–‡ä»¶<br>
    3. å°†ä¸‹è½½çš„å›¾ç‰‡æ–‡ä»¶æ”¾åˆ°å°ç¨‹åºçš„ <code>images/</code> ç›®å½•ä¸‹<br>
    4. ç¡®ä¿æ–‡ä»¶åä¸ app.json ä¸­çš„é…ç½®ä¸€è‡´
  </div>

  <script>
    // æ›´æ–°é¢„è§ˆ
    document.querySelectorAll('input[type="text"]').forEach(input => {
      input.addEventListener('input', function() {
        const id = this.id.replace('emoji-', '')
        const isActive = id.includes('-active')
        const baseId = id.replace('-active', '')
        const previewId = 'preview-' + baseId
        
        if (!isActive) {
          document.getElementById(previewId).textContent = this.value || 'ğŸ‘—'
        }
      })
    })

    function generateIcon(type, isActive) {
      const emojiInputId = isActive ? `emoji-${type}-active` : `emoji-${type}`
      const emoji = document.getElementById(emojiInputId).value || 'ğŸ‘—'
      
      // åˆ›å»º canvas
      const canvas = document.createElement('canvas')
      canvas.width = 162  // 81px @ 2x for retina
      canvas.height = 162
      const ctx = canvas.getContext('2d')
      
      // è®¾ç½®èƒŒæ™¯ï¼ˆæœªé€‰ä¸­ä¸ºæµ…ç°ï¼Œé€‰ä¸­ä¸ºå½©è‰²ï¼‰
      if (isActive) {
        ctx.fillStyle = '#3cc51f'  // é€‰ä¸­çŠ¶æ€èƒŒæ™¯è‰²
      } else {
        ctx.fillStyle = '#f5f5f5'  // æœªé€‰ä¸­çŠ¶æ€èƒŒæ™¯è‰²
      }
      ctx.fillRect(0, 0, canvas.width, canvas.height)
      
      // ç»˜åˆ¶ emoji
      ctx.font = '120px Arial'
      ctx.textAlign = 'center'
      ctx.textBaseline = 'middle'
      ctx.fillText(emoji, canvas.width / 2, canvas.height / 2)
      
      // è½¬æ¢ä¸ºå›¾ç‰‡å¹¶ä¸‹è½½
      canvas.toBlob(function(blob) {
        const url = URL.createObjectURL(blob)
        const a = document.createElement('a')
        const fileName = isActive ? `${type}-active.png` : `${type}.png`
        a.href = url
        a.download = fileName
        a.click()
        URL.revokeObjectURL(url)
      }, 'image/png')
    }

    // åˆå§‹åŒ–é¢„è§ˆ
    document.getElementById('preview-wardrobe').textContent = document.getElementById('emoji-wardrobe').value
    document.getElementById('preview-photo').textContent = document.getElementById('emoji-photo').value
    document.getElementById('preview-wishlist').textContent = document.getElementById('emoji-wishlist').value
  </script>
</body>
</html>

